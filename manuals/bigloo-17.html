<!-- 95% W3C COMPLIANT, 95% CSS FREE, RAW HTML -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
<title>Bigloo</title>
 <style type="text/css">
  <!--
  pre { font-family: monospace }
  tt { font-family: monospace }
  code { font-family: monospace }
  p.flushright { text-align: right }
  p.flushleft { text-align: left }
  span.sc { font-variant: small-caps }
  span.sf { font-family: sans-serif }
  span.skribetitle { font-family: sans-serif; font-weight: bolder; font-size: x-large; }
  span.refscreen { }
  span.refprint { display: none; }
  -->
 </style>
</head>

<body class="chapter" bgcolor="#ffffff">
<table width="100%" class="skribetitle" cellspacing="0" cellpadding="0"><tbody>
<tr><td align="center" bgcolor="#8381de"><div class="skribetitle"><strong><big><big><big>16. Bigloo<br/>A practical Scheme compiler<br/>User manual for version 4.2a<br/>May 2015 -- Errors, Assertions, and Traces</big></big></big></strong></div><center>
</center>
</td></tr></tbody></table>
<table cellpadding="3" cellspacing="0" width="100%" class="skribe-margins"><tr>
<td align="left" valign="top" class="skribe-left-margin" width="20%" bgcolor="#dedeff"><div class="skribe-left-margin">
<br/><center id='center32922'
><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr bgcolor="#8381de"><th id="tc32912" align="center" colspan="1"><font color="#ffffff"><strong id='bold32910'
>main page</strong></font></th></tr>
<tr bgcolor="#ffffff"><td id="tc32919" align="center" colspan="1"><table width="100%" border="0" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc32915" align="left" valign="top" colspan="1"><strong id='bold32914'
>top:</strong></td><td id="tc32916" align="right" valign="top" colspan="1"><a href="bigloo.html#Bigloo-A-practical-Scheme-compiler-User-manual-for-version-4.2a-May-2015" class="inbound">Bigloo<br/>A practical Scheme compiler<br/>User manual for version 4.2a<br/>May 2015</a></td></tr>
</tbody></table>
</td></tr>
</tbody></table>
</center>
<br/><br/><center id='center32932'
><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr bgcolor="#8381de"><th id="tc32926" align="center" colspan="1"><font color="#ffffff"><strong id='bold32924'
>Errors, Assertions, and Traces</strong></font></th></tr>
<tr bgcolor="#ffffff"><td id="tc32929" align="center" colspan="1"><table cellspacing="1" cellpadding="1" width="100%" class="toc">
<tbody>
 <tr><td valign="top" align="left">16.1</td><td colspan="4" width="100%"><a href="bigloo-17.html#Errors-and-Warnings">Errors and Warnings</a></td></tr>
 <tr><td valign="top" align="left">16.2</td><td colspan="4" width="100%"><a href="bigloo-17.html#Exceptions">Exceptions</a></td></tr>
 <tr><td valign="top" align="left">16.3</td><td colspan="4" width="100%"><a href="bigloo-17.html#Deprecated-try-form">Deprecated try form</a></td></tr>
 <tr><td valign="top" align="left">16.4</td><td colspan="4" width="100%"><a href="bigloo-17.html#Assertions">Assertions</a></td></tr>
 <tr><td valign="top" align="left">16.5</td><td colspan="4" width="100%"><a href="bigloo-17.html#Tracing">Tracing</a></td></tr>
</tbody>
</table>
</td></tr>
</tbody></table>
</center>
<br/><br/><center id='center32942'
><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr bgcolor="#8381de"><th id="tc32936" align="center" colspan="1"><font color="#ffffff"><strong id='bold32934'
>Chapters</strong></font></th></tr>
<tr bgcolor="#ffffff"><td id="tc32939" align="center" colspan="1"><table cellspacing="1" cellpadding="1" width="100%" class="toc">
<tbody>
 <tr><td valign="top" align="left"></td><td colspan="4" width="100%"><a href="bigloo-1.html#Acknowledgements">Acknowledgements</a></td></tr>
 <tr><td valign="top" align="left">1</td><td colspan="4" width="100%"><a href="bigloo-2.html#Table-of-contents">Table of contents</a></td></tr>
 <tr><td valign="top" align="left">2</td><td colspan="4" width="100%"><a href="bigloo-3.html#Overview-of-Bigloo">Overview of Bigloo</a></td></tr>
 <tr><td valign="top" align="left">3</td><td colspan="4" width="100%"><a href="bigloo-4.html#Modules">Modules</a></td></tr>
 <tr><td valign="top" align="left">4</td><td colspan="4" width="100%"><a href="bigloo-5.html#Core-Language">Core Language</a></td></tr>
 <tr><td valign="top" align="left">5</td><td colspan="4" width="100%"><a href="bigloo-6.html#DSSSL-support">DSSSL support</a></td></tr>
 <tr><td valign="top" align="left">6</td><td colspan="4" width="100%"><a href="bigloo-7.html#Standard-Library">Standard Library</a></td></tr>
 <tr><td valign="top" align="left">7</td><td colspan="4" width="100%"><a href="bigloo-8.html#Pattern-Matching">Pattern Matching</a></td></tr>
 <tr><td valign="top" align="left">8</td><td colspan="4" width="100%"><a href="bigloo-9.html#Fast-search">Fast search</a></td></tr>
 <tr><td valign="top" align="left">9</td><td colspan="4" width="100%"><a href="bigloo-10.html#Structures-and-Records">Structures and Records</a></td></tr>
 <tr><td valign="top" align="left">10</td><td colspan="4" width="100%"><a href="bigloo-11.html#Object-System">Object System</a></td></tr>
 <tr><td valign="top" align="left">11</td><td colspan="4" width="100%"><a href="bigloo-12.html#Regular-parsing">Regular parsing</a></td></tr>
 <tr><td valign="top" align="left">12</td><td colspan="4" width="100%"><a href="bigloo-13.html#Lalr(1)-parsing">Lalr(1) parsing</a></td></tr>
 <tr><td valign="top" align="left">13</td><td colspan="4" width="100%"><a href="bigloo-14.html#Posix-Regular-Expressions">Posix Regular Expressions</a></td></tr>
 <tr><td valign="top" align="left">14</td><td colspan="4" width="100%"><a href="bigloo-15.html#Command-Line-Parsing">Command Line Parsing</a></td></tr>
 <tr><td valign="top" align="left">15</td><td colspan="4" width="100%"><a href="bigloo-16.html#Cryptography">Cryptography</a></td></tr>
 <tr><td valign="top" align="left">16</td><td colspan="4" width="100%"><a href="bigloo-17.html#Errors-Assertions-and-Traces">Errors, Assertions, and Traces</a></td></tr>
 <tr><td valign="top" align="left">17</td><td colspan="4" width="100%"><a href="bigloo-18.html#Threads">Threads</a></td></tr>
 <tr><td valign="top" align="left">18</td><td colspan="4" width="100%"><a href="bigloo-19.html#Database">Database</a></td></tr>
 <tr><td valign="top" align="left">19</td><td colspan="4" width="100%"><a href="bigloo-20.html#Multimedia">Multimedia</a></td></tr>
 <tr><td valign="top" align="left">20</td><td colspan="4" width="100%"><a href="bigloo-21.html#Mail">Mail</a></td></tr>
 <tr><td valign="top" align="left">21</td><td colspan="4" width="100%"><a href="bigloo-22.html#Text">Text</a></td></tr>
 <tr><td valign="top" align="left">22</td><td colspan="4" width="100%"><a href="bigloo-23.html#CSV">CSV</a></td></tr>
 <tr><td valign="top" align="left">23</td><td colspan="4" width="100%"><a href="bigloo-24.html#Eval-and-code-interpretation">Eval and code interpretation</a></td></tr>
 <tr><td valign="top" align="left">24</td><td colspan="4" width="100%"><a href="bigloo-25.html#Macro-expansion">Macro expansion</a></td></tr>
 <tr><td valign="top" align="left">25</td><td colspan="4" width="100%"><a href="bigloo-26.html#Parameters">Parameters</a></td></tr>
 <tr><td valign="top" align="left">26</td><td colspan="4" width="100%"><a href="bigloo-27.html#Explicit-typing">Explicit typing</a></td></tr>
 <tr><td valign="top" align="left">27</td><td colspan="4" width="100%"><a href="bigloo-28.html#The-C-interface">The C interface</a></td></tr>
 <tr><td valign="top" align="left">28</td><td colspan="4" width="100%"><a href="bigloo-29.html#The-Java-interface">The Java interface</a></td></tr>
 <tr><td valign="top" align="left">29</td><td colspan="4" width="100%"><a href="bigloo-30.html#Bigloo-Libraries">Bigloo Libraries</a></td></tr>
 <tr><td valign="top" align="left">30</td><td colspan="4" width="100%"><a href="bigloo-31.html#Extending-the-Runtime-System">Extending the Runtime System</a></td></tr>
 <tr><td valign="top" align="left">31</td><td colspan="4" width="100%"><a href="bigloo-32.html#SRFIs">SRFIs</a></td></tr>
 <tr><td valign="top" align="left">32</td><td colspan="4" width="100%"><a href="bigloo-33.html#Compiler-description">Compiler description</a></td></tr>
 <tr><td valign="top" align="left">33</td><td colspan="4" width="100%"><a href="bigloo-34.html#Cross-Compilation">Cross Compilation</a></td></tr>
 <tr><td valign="top" align="left">34</td><td colspan="4" width="100%"><a href="bigloo-35.html#User-Extensions">User Extensions</a></td></tr>
 <tr><td valign="top" align="left">35</td><td colspan="4" width="100%"><a href="bigloo-36.html#Bigloo-Development-Environment">Bigloo Development Environment</a></td></tr>
 <tr><td valign="top" align="left">36</td><td colspan="4" width="100%"><a href="bigloo-37.html#Global-Index">Global Index</a></td></tr>
 <tr><td valign="top" align="left">37</td><td colspan="4" width="100%"><a href="bigloo-38.html#Library-Index">Library Index</a></td></tr>
 <tr><td valign="top" align="left"></td><td colspan="4" width="100%"><a href="bigloo-39.html#Bibliography">Bibliography</a></td></tr>
</tbody>
</table>
</td></tr>
</tbody></table>
</center>
</div></td>
<td align="left" valign="top" class="skribe-body"><div class="skribe-body">
<a name="Errors-Assertions-and-Traces" class="mark"></a><a name="g20636" class="mark"></a><a name="g20638" class="mark"></a><a name="g20640" class="mark"></a><a name="g20642" class="mark"></a>

<!-- Errors and Warnings -->
<a name="Errors-and-Warnings"></a>
<div class="section-atitle"><table width="100%"><tr><td bgcolor="#dedeff"><h3><font color="black">16.1 Errors and Warnings</font>
</h3></td></tr></table>
</div><div class="section">
<a name="Errors-and-Warnings" class="mark"></a>
Bigloo permits to signal an error via the <code id='code20644'
>error</code> function. Errors
are implemented by the means of exceptions (see <code id='code20645'
>with-exception-handler</code>,
<code id='code20646'
>with-handler</code>, and <code id='code20647'
>raise</code> forms). Assertions allow the checking
of predicates at certain points in programs.  <br/><br/><table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20650" class="mark"></a><a name="typeof" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20654" align="left" colspan="1"><strong id='bold20652'
>typeof</strong><em id='it20653'
> obj</em></td><td id="tc20655" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
Returns a string which is the name of the dynamic type of <code id='code20659'
><em id='it20658'
>obj</em></code>.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20663" class="mark"></a><a name="error" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20667" align="left" colspan="1"><strong id='bold20665'
>error</strong><em id='it20666'
> proc msg obj</em></td><td id="tc20668" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
This form signals an error by calling the current error handler with
<code id='code20672'
><em id='it20671'
>proc</em></code>, <code id='code20674'
><em id='it20673'
>msg</em></code> and <code id='code20676'
><em id='it20675'
>obj</em></code> as arguments.<br/><br/><center id='center20688'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20686'
>(<font color="#6959cf"><strong id='bold32943'
>define</strong></font> (<font color="#6959cf"><strong id='bold32945'
>foo</strong></font> l)
   (<strong id='bold32947'
>if</strong> (not (pair? l))
       (<font color="red"><strong id='bold32948'
>error</strong></font> <font color="red">&quot;foo&quot;</font> <font color="red">&quot;argument not a pair&quot;</font> l)
       (car l)))<br/><br/>(foo 4)
error--&gt; *** ERROR<strong id='bold32952'
>:bigloo</strong><strong id='bold32954'
>:foo</strong>:
         argument not a pair -- 4
</pre>
</td></tr>
</tbody></table></center>

Switching on the <code id='code20689'
>-g</code> compilation switch enables stack dumping
when the <code id='code20690'
>error</code> function is invoked. That is, when a program is
compiled with <code id='code20691'
>-g</code> and when, at runtime, the shell variable
<code id='code20692'
>BIGLOOSTACKDEPTH</code> is set and contains a number, an execution
stack of depth <code id='code20693'
>BIGLOOSTACKDEPTH</code> is printed when an error is
raised.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20697" class="mark"></a><a name="error/location" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20701" align="left" colspan="1"><strong id='bold20699'
>error/location</strong><em id='it20700'
> proc msg obj file location</em></td><td id="tc20702" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
This form signals an error by calling the current error handler with
<code id='code20706'
><em id='it20705'
>proc</em></code>, <code id='code20708'
><em id='it20707'
>msg</em></code> and <code id='code20710'
><em id='it20709'
>obj</em></code> as arguments. The error is prompted
in <code id='code20712'
><em id='it20711'
>file</em></code>, at character position <code id='code20714'
><em id='it20713'
>location</em></code>.<br/><br/><center id='center20727'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20725'
>(<font color="#6959cf"><strong id='bold32956'
>define</strong></font> (<font color="#6959cf"><strong id='bold32958'
>foo</strong></font> l)
   (<strong id='bold32960'
>if</strong> (not (pair? l))
       (error/location
         <font color="red">&quot;foo&quot;</font> <font color="red">&quot;argument not a pair&quot;</font> l <font color="red">&quot;foo.scm&quot;</font> 115)
       (car l)))<br/><br/>(foo 4)
error--&gt; File <font color="red">&quot;foo.scm&quot;</font>, line 4, character 115:
         #       (car l)))
         #       ^
         # *** ERROR<strong id='bold32965'
>:bigloo</strong><strong id='bold32967'
>:foo</strong>
         # argument not a pair -- 4
             0. FOO
             1. DYNAMIC-WIND
             2. INTERP
             3. ENGINE
             4. MAIN
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20731" class="mark"></a><a name="get-trace-stack" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20735" align="left" colspan="1"><strong id='bold20733'
>get-trace-stack</strong><em id='it20734'
> size</em></td><td id="tc20736" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
<a name="g20740" class="mark"></a><a name="dump-trace-stack" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20744" align="left" colspan="1"><strong id='bold20742'
>dump-trace-stack</strong><em id='it20743'
> output-port size</em></td><td id="tc20745" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
Switching on the <code id='code20748'
>-g</code> compilation switch enables stack dumping
<a href="bigloo-33.html#Compiler-Description" class="inbound">Compiler Description</a>. That is, the list of the pending calls
can be dumped by the runtime-system. The function <code id='code20749'
>get-trace-stack</code>
builds such a trace. The list built by <code id='code20750'
>get-trace-stack</code> only
contains the <code id='code20752'
><em id='it20751'
>size</em></code> top most pending calls. The function
<code id='code20753'
>dump-trace-stack</code> displays a representation of this stack on the
<code id='code20755'
><em id='it20754'
>output-port</em></code>.<br/><br/></td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20760" class="mark"></a><a name="warning/location" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20764" align="left" colspan="1"><strong id='bold20762'
>warning/location</strong><em id='it20763'
> file location [arg]...</em></td><td id="tc20765" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
This form signals a warning. That is, is <code id='code20769'
><em id='it20768'
>arg</em></code> are displayed
on the standard error port. The warning is prompted in <code id='code20771'
><em id='it20770'
>file</em></code> at
character position <code id='code20773'
><em id='it20772'
>location</em></code>.<br/><br/><center id='center20787'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20785'
>(<font color="#6959cf"><strong id='bold32969'
>define</strong></font> (<font color="#6959cf"><strong id='bold32971'
>foo</strong></font> l)
   (<strong id='bold32973'
>if</strong> (not (pair? l))
       (<strong id='bold32974'
>begin</strong>
          (warning/location
            <font color="red">&quot;foo.scm&quot;</font> 154 <font color="red">&quot;foo:&quot;</font> <font color="red">&quot;argument not a pair -- &quot;</font> l)
          '())
       (car l)))<br/><br/>(foo 4)
-| File <font color="red">&quot;foo.scm&quot;</font>, line 6, character 154:
   #       (car l)))
   #       ^
   # *** WARNING<strong id='bold32979'
>:bigloo</strong><strong id='bold32981'
>:foo</strong>:
   argument not a pair -- 4
=&gt; '()
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20791" class="mark"></a><a name="exception-notify" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20795" align="left" colspan="1"><strong id='bold20793'
>exception-notify</strong><em id='it20794'
> exc</em></td><td id="tc20796" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
<a name="g20800" class="mark"></a><a name="error-notify" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20804" align="left" colspan="1"><strong id='bold20802'
>error-notify</strong><em id='it20803'
> err</em></td><td id="tc20805" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
<a name="g20809" class="mark"></a><a name="warning-notify" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20813" align="left" colspan="1"><strong id='bold20811'
>warning-notify</strong><em id='it20812'
> err</em></td><td id="tc20814" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
Display a message describing the error or warning on the default error port.
</td></tr>
</tbody></table><br/>
</div><br>
<!-- Exceptions -->
<a name="Exceptions"></a>
<div class="section-atitle"><table width="100%"><tr><td bgcolor="#dedeff"><h3><font color="black">16.2 Exceptions</font>
</h3></td></tr></table>
</div><div class="section">
<a name="Exceptions" class="mark"></a><a name="g20819" class="mark"></a><a name="g20821" class="mark"></a><a name="g20823" class="mark"></a>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20826" class="mark"></a><a name="current-exception-handler" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20830" align="left" colspan="1"><strong id='bold20828'
>current-exception-handler</strong><em id='it20829'
></em></td><td id="tc20831" align="right" colspan="1">SRFI-18 function</td></tr>
</tbody></table>
Returns the current exception handler with is a 0-ary procedure.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20837" class="mark"></a><a name="with-exception-handler" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20841" align="left" colspan="1"><strong id='bold20839'
>with-exception-handler</strong><em id='it20840'
> handler thunk</em></td><td id="tc20842" align="right" colspan="1">SRFI-18 function</td></tr>
</tbody></table>
Returns the result(s) of calling <code id='code20846'
><em id='it20845'
>thunk</em></code> with no arguments. The
<code id='code20848'
><em id='it20847'
>handler</em></code>, which must be a procedure, is installed as the current
exception handler in the dynamic environment in effect during the call
to <code id='code20850'
><em id='it20849'
>thunk</em></code>. When possible, prefer <code id='code20851'
>with-handler</code> to 
<code id='code20852'
>with-exception-handler</code> because the former provides better debugging
support and because its semantics is more intuitive.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20856" class="mark"></a><a name="with-handler" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20860" align="left" colspan="1"><strong id='bold20858'
>with-handler</strong><em id='it20859'
> handler body</em></td><td id="tc20861" align="right" colspan="1">bigloo form</td></tr>
</tbody></table>
Returns the result(s) of evaluating <code id='code20865'
><em id='it20864'
>body</em></code>. The
<code id='code20867'
><em id='it20866'
>handler</em></code>, which must be a procedure, is installed as the current
exception handler in the dynamic environment in effect during the evaluation
of <code id='code20869'
><em id='it20868'
>body</em></code>. Contrarily to <code id='code20870'
>with-exception-handler</code>, if an exception
is raised, the <code id='code20872'
><em id='it20871'
>handler</em></code> is invoked and the value of the 
<code id='code20873'
>with-handler</code> form is the value produced by invoking the <code id='code20875'
><em id='it20874'
>handler</em></code>.
The handler is executed in the continuation of the <code id='code20876'
>with-handler</code>
form.<br/><br/>JVM note: When executed within a JVM, the form <code id='code20878'
>with-handler</code>
also catches Java exceptions.<br/><br/>Important note: Since Bigloo version 3.2c, error handlers are executed
<em id='emph20880'
>after</em> the execution stack is unwound. Hence, error handlers are
executed <em id='emph20881'
>after</em> protected blocks.  For instance in the following
code:<br/><br/><center id='center20888'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20886'
>(<font color="red"><strong id='bold32983'
>with-handler</strong></font> 
   (<strong id='bold32985'
>lambda</strong> (e) action)
   (<font color="red"><strong id='bold32986'
>unwind-protect</strong></font>
      body
      protect))
</pre>
</td></tr>
</tbody></table></center>

The <code id='code20890'
><em id='it20889'
>action</em></code> is executed <em id='emph20891'
>after</em> <code id='code20893'
><em id='it20892'
>protect</em></code>.<br/><br/></td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g20898" class="mark"></a><a name="raise" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc20902" align="left" colspan="1"><strong id='bold20900'
>raise</strong><em id='it20901'
> obj</em></td><td id="tc20903" align="right" colspan="1">SRFI-18 function</td></tr>
</tbody></table>

Calls the current exception handler with obj as the single
argument. obj may be any Scheme object. Note that invoking the current
handler does not escape from the current computation. It is up the to
handler to perform the escape. It an error, signaled by the runtime
system, if the current exception handler returns.<br/><br/><center id='center20923'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20921'
>(<font color="#6959cf"><strong id='bold32988'
>define</strong></font> (<font color="#6959cf"><strong id='bold32990'
>f</strong></font> n)
  (<strong id='bold32992'
>if</strong> (&lt; n 0) (<font color="red"><strong id='bold32993'
>raise</strong></font> <font color="red">&quot;negative arg&quot;</font>) (sqrt n))))<br/><br/>(<font color="#6959cf"><strong id='bold32996'
>define</strong></font> (<font color="#6959cf"><strong id='bold32998'
>g</strong></font>)
  (<font color="red"><strong id='bold33000'
>bind-exit</strong></font> (return)
    (with-exception-handler
      (<strong id='bold33002'
>lambda</strong> (exc)
        (return
          (<strong id='bold33003'
>if</strong> (string? exc)
              (string-append <font color="red">&quot;error: &quot;</font> exc)
              <font color="red">&quot;unknown error&quot;</font>)))
      (<strong id='bold33006'
>lambda</strong> ()
        (write (f 4.))
        (write (f -1.))
        (write (f 9.))))))<br/><br/>(g)  -| 2. and returns <font color="red">&quot;error: negative arg&quot;</font>
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
The standard Bigloo runtime system uses the following classes for
signaling errors and warnings:<br/><br/><ul class="itemize" id='itemize21100'
><li><code id='code20927'
>&amp;exception</code> which is defined as:
<a name="g20928" class="mark"></a><center id='center20933'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20931'
>(<strong id='bold33008'
>class</strong> &amp;exception
   (fname read-only (default #f))
   (location read-only (default #f)))
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code20935'
>&amp;error</code> defined as:
<a name="g20936" class="mark"></a><center id='center20942'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20940'
>(<strong id='bold33009'
>class</strong> &amp;error<font color="#00cf00"><strong id='bold33010'
>::&amp;exception</strong></font>
   (proc read-only)
   (msg read-only)
   (obj read-only))
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code20944'
>&amp;type-error</code> defined as:
<a name="g20945" class="mark"></a>
<center id='center20952'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20950'
>(<strong id='bold33012'
>class</strong> &amp;type-error<font color="#00cf00"><strong id='bold33013'
>::&amp;error</strong></font>
   (<strong id='bold33015'
>type</strong> read-only))
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code20954'
>&amp;io-error</code> defined as:
<a name="g20955" class="mark"></a>
<center id='center20961'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20959'
>(<strong id='bold33016'
>class</strong> &amp;io-error<font color="#00cf00"><strong id='bold33017'
>::&amp;error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code20963'
>&amp;io-port-error</code> defined as:
<a name="g20964" class="mark"></a>
<center id='center20970'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20968'
>(<strong id='bold33019'
>class</strong> &amp;io-port-error<font color="#00cf00"><strong id='bold33020'
>::&amp;io-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>
</li>
<li><code id='code20972'
>&amp;io-read-error</code> defined as:
<a name="g20973" class="mark"></a>
<center id='center20979'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20977'
>(<strong id='bold33022'
>class</strong> &amp;io-read-error<font color="#00cf00"><strong id='bold33023'
>::&amp;io-port-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>
</li>
<li><code id='code20981'
>&amp;io-write-error</code> defined as:
<a name="g20982" class="mark"></a>
<center id='center20988'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20986'
>(<strong id='bold33025'
>class</strong> &amp;io-write-error<font color="#00cf00"><strong id='bold33026'
>::&amp;io-port-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code20990'
>&amp;io-closed-error</code> defined as:
<a name="g20991" class="mark"></a>
<center id='center20997'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog20995'
>(<strong id='bold33028'
>class</strong> &amp;io-closed-error<font color="#00cf00"><strong id='bold33029'
>::&amp;io-port-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code20999'
>&amp;io-file-not-found-error</code> defined as:
<a name="g21000" class="mark"></a>
<center id='center21006'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21004'
>(<strong id='bold33031'
>class</strong> &amp;io-file-not-found-error<font color="#00cf00"><strong id='bold33032'
>::&amp;io-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>
</li>
<li><code id='code21008'
>&amp;io-parse-error</code> defined as:

<a name="g21009" class="mark"></a>
<center id='center21015'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21013'
>(<strong id='bold33034'
>class</strong> &amp;io-parse-error<font color="#00cf00"><strong id='bold33035'
>::&amp;io-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21017'
>&amp;io-unknown-host-error</code> defined as:
<a name="g21018" class="mark"></a>
<center id='center21024'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21022'
>(<strong id='bold33037'
>class</strong> &amp;io-unknown-host-error<font color="#00cf00"><strong id='bold33038'
>::&amp;io-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21026'
>&amp;io-malformed-url-error</code> defined as:
<a name="g21027" class="mark"></a>
<center id='center21033'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21031'
>(<strong id='bold33040'
>class</strong> &amp;io-malformed-url-error<font color="#00cf00"><strong id='bold33041'
>::&amp;io-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21035'
>&amp;http-error</code> defined as:
<a name="g21036" class="mark"></a>
<center id='center21042'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21040'
>(<strong id='bold33043'
>class</strong> &amp;http-error<font color="#00cf00"><strong id='bold33044'
>::&amp;error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21044'
>&amp;http-redirection-error</code> defined as:
<a name="g21045" class="mark"></a>
<center id='center21051'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21049'
>(<strong id='bold33046'
>class</strong> &amp;http-redirection-error<font color="#00cf00"><strong id='bold33047'
>::&amp;http-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21053'
>&amp;http-status-error</code> defined as:
<a name="g21054" class="mark"></a>
<center id='center21060'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21058'
>(<strong id='bold33049'
>class</strong> &amp;http-status-error<font color="#00cf00"><strong id='bold33050'
>::&amp;http-error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21062'
>&amp;http-redirection</code> defined as:
<a name="g21063" class="mark"></a>
<center id='center21071'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21069'
>(<strong id='bold33052'
>class</strong> &amp;http-redirection<font color="#00cf00"><strong id='bold33053'
>::&amp;exception</strong></font>
  (port<font color="#00cf00"><strong id='bold33055'
>::input-port</strong></font> read-only)
  (url<font color="#00cf00"><strong id='bold33057'
>::bstring</strong></font> read-only))
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21073'
>&amp;process-exception</code> defined as:
<a name="g21074" class="mark"></a>
<center id='center21080'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21078'
>(<strong id='bold33059'
>class</strong> &amp;process-exception<font color="#00cf00"><strong id='bold33060'
>::&amp;error</strong></font>)
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21082'
>&amp;warning</code> defined as:
<a name="g21083" class="mark"></a>
<center id='center21089'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21087'
>(<strong id='bold33062'
>class</strong> &amp;warning<font color="#00cf00"><strong id='bold33063'
>::&amp;exception</strong></font>
   (args read-only))
</pre>
</td></tr>
</tbody></table></center>

</li>
<li><code id='code21091'
>&amp;eval-warning</code> defined as:
<a name="g21092" class="mark"></a>
<center id='center21098'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21096'
>(<strong id='bold33065'
>class</strong> &amp;warning<font color="#00cf00"><strong id='bold33066'
>::&amp;warning</strong></font>)
</pre>
</td></tr>
</tbody></table></center>
</li>
</ul>
</div><br>
<!-- Deprecated try form -->
<a name="Deprecated-try-form"></a>
<div class="section-atitle"><table width="100%"><tr><td bgcolor="#dedeff"><h3><font color="black">16.3 Deprecated try form</font>
</h3></td></tr></table>
</div><div class="section">
<a name="Try" class="mark"></a>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21103" align="left" colspan="1"><strong id='bold21101'
>try</strong><em id='it21102'
> exp handler</em></td><td id="tc21104" align="right" colspan="1">bigloo syntax</td></tr>
</tbody></table>

This form is deprecated. As much as possible, it should be replaced with
true exceptions (i.e., <code id='code21107'
>with-exception-handler</code> and <code id='code21108'
>raise</code>). 
The argument <code id='code21110'
><em id='it21109'
>exp</em></code> is evaluated. If an error is raised, the
<code id='code21112'
><em id='it21111'
>handler</em></code> is called. The argument <code id='code21114'
><em id='it21113'
>handler</em></code> is a procedure of
four arguments. Its first argument is the continuation of <code id='code21116'
><em id='it21115'
>try</em></code>. The
other arguments are <code id='code21118'
><em id='it21117'
>proc</em></code>, <code id='code21120'
><em id='it21119'
>mes</em></code> and <code id='code21122'
><em id='it21121'
>obj</em></code>. Invoking the
first argument will resume after the error.<br/><br/><center id='center21133'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21131'
>(<strong id='bold33068'
>let</strong> ((handler (<strong id='bold33069'
>lambda</strong> (escape proc mes obj)
                  (print <font color="red">&quot;***ERROR:&quot;</font> proc <font color="red">&quot;:&quot;</font> mes <font color="red">&quot; -- &quot;</font> obj)
                  (escape #f))))
   (try (car 1) handler))
   -| ***ERROR<strong id='bold33073'
>:CAR</strong><strong id='bold33075'
>:not</strong> a pair -- 1
   =&gt; #f
</pre>
</td></tr>
</tbody></table></center>

The argument <code id='code21135'
><em id='it21134'
>handler</em></code> is not evaluated in the dynamic scope of its
<code id='code21136'
>try</code> form. That is:<br/><br/><center id='center21144'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21142'
>(<strong id='bold33077'
>let</strong> ((handler (<strong id='bold33078'
>lambda</strong> (escape proc mes obj)
                  (escape (car obj)))))
   (try (car 1) handler))
   error--&gt; *** ERROR<strong id='bold33079'
>:bigloo</strong><strong id='bold33081'
>:CAR</strong>
            Type `PAIR' expected, `BINT' provided -- 1
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
Some library functions exist to help in writing handlers:<br/><br/><table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21149" class="mark"></a><a name="warning" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21153" align="left" colspan="1"><strong id='bold21151'
>warning</strong><em id='it21152'
> [arg]...</em></td><td id="tc21154" align="right" colspan="1">bigloo procedure</td></tr>
</tbody></table>
This form signals a warning. That is, is <code id='code21158'
><em id='it21157'
>arg</em></code> are displayed
on the standard error port.<br/><br/><center id='center21171'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21169'
>(<font color="#6959cf"><strong id='bold33083'
>define</strong></font> (<font color="#6959cf"><strong id='bold33085'
>foo</strong></font> l)
   (<strong id='bold33087'
>if</strong> (not (pair? l))
       (<strong id='bold33088'
>begin</strong>
          (<font color="red"><strong id='bold33089'
>warning</strong></font> <font color="red">&quot;foo:&quot;</font> <font color="red">&quot;argument not a pair -- &quot;</font> l)
          '())
       (car l)))<br/><br/>(foo 4)
-| *** WARNING<strong id='bold33093'
>:bigloo</strong><strong id='bold33095'
>:foo</strong>:
   argument not a pair -- 4
=&gt; '()
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
</div><br>
<!-- Assertions -->
<a name="Assertions"></a>
<div class="section-atitle"><table width="100%"><tr><td bgcolor="#dedeff"><h3><font color="black">16.4 Assertions</font>
</h3></td></tr></table>
</div><div class="section">
<a name="Assertions" class="mark"></a>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21175" class="mark"></a><a name="assert" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21179" align="left" colspan="1"><strong id='bold21177'
>assert</strong><em id='it21178'
> (var...) s-expression</em></td><td id="tc21180" align="right" colspan="1">bigloo syntax</td></tr>
</tbody></table>

Assertions can be enabled or disabled using Bigloo's compilation flags
<code id='code21183'
>-g</code> flag to enable them). If the assertions are disabled they are
not evaluated. If an assertion is evaluated, if the expression <code id='code21185'
><em id='it21184'
>exp</em></code>
does not evaluate to <code id='code21186'
>#t</code>, an error is signaled and the interpreter
is launched in an environment where <code id='code21188'
><em id='it21187'
>var</em></code>... are bound to their
current values.<br/><br/>Assertion forms are legal expressions which <em id='emph21190'
>always</em> evaluate
to the <code id='code21191'
>unspecified</code> object.<br/><br/>Here is an example of assertion usage:<br/><br/><center id='center21206'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21204'
>(<font color="#1919af"><strong id='bold33097'
>module</strong></font> <font color="#1919af"><strong id='bold33099'
>foo</strong></font>
   (eval (<font color="#1919af"><strong id='bold33101'
>export</strong></font> <font color="#1919af"><strong id='bold33103'
>foo</strong></font>)))<br/><br/>(<font color="#6959cf"><strong id='bold33105'
>define</strong></font> (<font color="#6959cf"><strong id='bold33107'
>foo</strong></font> x y)
   [assert (x y) (&lt; x y)]
   (<strong id='bold33109'
>labels</strong> ((gee (t)
                 [assert (t) (&gt;= t 0)]
                 (<strong id='bold33110'
>let</strong> ((res (+ x t)))
                    [assert (res t) (&gt; res 10)]
                    res)))
      (<strong id='bold33111'
>set!</strong> x (gee y))
      [assert (x) (&gt; x 10)]
      x))<br/><br/>(repl)
</pre>
</td></tr>
</tbody></table></center>

This module is compiled with the <code id='code21207'
>-g</code> flag to enable assertions, then
the produced executable is run:<br/><br/><center id='center21215'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ccffcc"><pre class="prog" id='prog21213'
>$ a.out<br/><br/>1:=&gt; (foo 1 2)<br/><br/>File &quot;foo.scm&quot;, line 9, character 158:
#                   [assert (res t) (&gt; res 10)]
#                   ^
# *** ERROR:bigloo:assert
# assertion failed -- (BEGIN (&gt; RES 10))
    0. GEE
    1. FOO
-----------------------
Variables' value are : 
   RES : 3
   T : 2
-----------------------
*:=&gt; ^D
File &quot;foo.scm&quot;, line 12, character 228:
#      [assert (x) (&gt; x 10)]
#      ^
# *** ERROR:bigloo:assert
# assertion failed -- (BEGIN (&gt; X 10))
    0. FOO
-----------------------
Variables' value are : 
   X : 3
-----------------------<br/><br/>*:=&gt; 3
1:=&gt; (foo 1 2)
File &quot;foo.scm&quot;, line 9, character 158:
#                   [assert (res t) (&gt; res 10)]
#                   ^
# *** ERROR:bigloo:assert
# assertion failed -- (BEGIN (&gt; RES 10))
    0. GEE
    1. FOO
-----------------------
Variables' value are : 
   RES : 3
   T : 2
-----------------------<br/><br/>*:=&gt; 
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
</div><br>
<!-- Tracing -->
<a name="Tracing"></a>
<div class="section-atitle"><table width="100%"><tr><td bgcolor="#dedeff"><h3><font color="black">16.5 Tracing</font>
</h3></td></tr></table>
</div><div class="section">
<a name="Tracing" class="mark"></a><a name="g21218" class="mark"></a><a name="g21220" class="mark"></a>
Bigloo provides a trace facility whose is intended for simple
debugging tasks. It is a replacement for user <code id='code21222'
>display</code>s that
clutters the source code. Here is a typical example using it:<br/><br/><center id='center21232'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21230'
>(<font color="#6959cf"><strong id='bold33112'
>define</strong></font> (<font color="#6959cf"><strong id='bold33114'
>foo</strong></font> x)
   (with-trace 1 'foo
      (<strong id='bold33116'
>let</strong> loop ((n x))
	 (with-trace 2 'loop
	    (trace-item <font color="red">&quot;n=&quot;</font> n)
	    (when (&gt; n 0)
	       (<strong id='bold33118'
>let</strong> liip ((m n))
		  (with-trace 2 'liip
		     (trace-item <font color="red">&quot;m=&quot;</font> m))
		  (when (&gt; m 0)
		     (liip (- m 1))))
	       (loop (- n 1)))))))<br/><br/>(foo 3)
</pre>
</td></tr>
</tbody></table></center>

which produces the following output:<br/><br/><center id='center21236'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ccccff"><pre class="prog" id='prog21234'
>+ foo
  |--+ loop
  |  |- n=3
  |  |--+ liip
  |  |  |- m=3
  |  |--+ liip
  |  |  |- m=2
  |  |--+ liip
  |  |  |- m=1
  |  |--+ liip
  |  |  |- m=0
  |  |--+ loop
  |  |  |- n=2
  |  |  |--+ liip
  |  |  |  |- m=2
  |  |  |--+ liip
  |  |  |  |- m=1
  |  |  |--+ liip
  |  |  |  |- m=0
  |  |  |--+ loop
  |  |  |  |- n=1
  |  |  |  |--+ liip
  |  |  |  |  |- m=1
  |  |  |  |--+ liip
  |  |  |  |  |- m=0
  |  |  |  |--+ loop
  |  |  |  |  |- n=0
</pre>
</td></tr>
</tbody></table></center>

Traces generation is controlled by a set of functions and parameters
(see <a href="bigloo-26.html#Parameters" class="inbound">Parameters</a>). The functions are described in this chapter.<br/><br/><table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21239" class="mark"></a><a name="with-trace" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21243" align="left" colspan="1"><strong id='bold21241'
>with-trace</strong><em id='it21242'
> level label . body</em></td><td id="tc21244" align="right" colspan="1">bigloo syntax</td></tr>
</tbody></table>

The variable <code id='code21248'
><em id='it21247'
>level</em></code> is the level of a trace. It is a positive
integer. It enables simple filtering for traces. A trace is displayed
if and only if the debugging level used to compile or to execute the
program is greater than the trace level. The variable <code id='code21250'
><em id='it21249'
>label</em></code> is a
label, .e.i., an identifier denoting the trace. This identifier will
be displayed in debug mode.  The variable <code id='code21252'
><em id='it21251'
>body</em></code> is the body of
the form, that is, the expression to be evaluated.<br/><br/>Unless a trace is activated <code id='code21254'
>(with-trace lv la body)</code> (when its
level <code id='code21256'
><em id='it21255'
>lv</em></code> is greater than the current debug level) is equivalent
to <code id='code21257'
>(begin body)</code>. When traces are activated, before executing
<code id='code21259'
><em id='it21258'
>body</em></code>.<br/><br/>The debugging level is controlled by two parameters:
<code id='code21261'
>bigloo-debug</code> and <code id='code21262'
>bigloo-compiler-debug</code> (see <a href="bigloo-26.html#Parameters" class="inbound">Parameters</a>).<br/><br/></td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21267" class="mark"></a><a name="trace-item" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21271" align="left" colspan="1"><strong id='bold21269'
>trace-item</strong><em id='it21270'
> . args</em></td><td id="tc21272" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
This function displays all its arguments. It has to be used nested in
a <code id='code21276'
><em id='it21275'
>with-trace</em></code> form. 
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21280" class="mark"></a><a name="trace-bold" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21284" align="left" colspan="1"><strong id='bold21282'
>trace-bold</strong><em id='it21283'
> s</em></td><td id="tc21285" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
<a name="g21289" class="mark"></a><a name="trace-string" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21293" align="left" colspan="1"><strong id='bold21291'
>trace-string</strong><em id='it21292'
> s</em></td><td id="tc21294" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
These two functions are provided for convenience. They returns strings
made of their parameters.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21300" class="mark"></a><a name="trace-color" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21304" align="left" colspan="1"><strong id='bold21302'
>trace-color</strong><em id='it21303'
> color . args</em></td><td id="tc21305" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
The <code id='code21309'
><em id='it21308'
>color</em></code> argument is a positive integer. 
This function returns a string which is the representation of <code id='code21311'
><em id='it21310'
>args</em></code>
and that appears on the terminal in color <code id='code21313'
><em id='it21312'
>color</em></code>.<br/><br/>Colors can be enable or disabled using the <code id='code21315'
>bigloo-trace-color</code>
parameter (see <a href="bigloo-26.html#Parameters" class="inbound">Parameters</a>).
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21319" class="mark"></a><a name="trace-margin" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21323" align="left" colspan="1"><strong id='bold21321'
>trace-margin</strong><em id='it21322'
></em></td><td id="tc21324" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
<a name="g21328" class="mark"></a><a name="trace-margin-set!" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21332" align="left" colspan="1"><strong id='bold21330'
>trace-margin-set!</strong><em id='it21331'
></em></td><td id="tc21333" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
The <code id='code21337'
><em id='it21336'
>trace-margin</em></code> parameter is used to control the characters
that are displayed in the margin of a trace. Usual applications should
not use this. However, it may be convenient to set the margin by hands
in some context. For instance, it can be used to distinguished threads
in a multi-threaded application such as:<br/><br/><center id='center21347'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog21345'
>(<font color="#ad4386"><strong id='bold33120'
>make-thread</strong></font> (<strong id='bold33122'
>lambda</strong> () 
                (trace-margin-set! (trace-color 1 <font color="red">&quot;=&quot;</font>))
                ...))
(<font color="#ad4386"><strong id='bold33124'
>make-thread</strong></font> (<strong id='bold33126'
>lambda</strong> () 
                (trace-margin-set! (trace-color 2 <font color="red">&quot;=&quot;</font>))
                ...))
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g21351" class="mark"></a><a name="trace-port" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21355" align="left" colspan="1"><strong id='bold21353'
>trace-port</strong><em id='it21354'
></em></td><td id="tc21356" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
<a name="g21360" class="mark"></a><a name="trace-port-set!" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc21364" align="left" colspan="1"><strong id='bold21362'
>trace-port-set!</strong><em id='it21363'
></em></td><td id="tc21365" align="right" colspan="1">bigloo function</td></tr>
</tbody></table>
These functions return and set the output port used by traces.
</td></tr>
</tbody></table><br/><br/><br/>

</div><br>
</div></td>
</tr></table><div class="skribe-ending">
<hr> 
<p class="ending" id='paragraph33133'
><font size="-1">
This <span class="sc">Html</span> page has been produced by 
<a href="http://www-sop.inria.fr/indes/fp/Skribe" class="http">Skribe</a>.
<br/>
Last update <em id='it33131'
>Tue May  5 15:25:29 2015</em>.</font></p></div>
</body>
</html>
