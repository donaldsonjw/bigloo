<!-- 95% W3C COMPLIANT, 95% CSS FREE, RAW HTML -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
<title>Bigloo</title>
 <style type="text/css">
  <!--
  pre { font-family: monospace }
  tt { font-family: monospace }
  code { font-family: monospace }
  p.flushright { text-align: right }
  p.flushleft { text-align: left }
  span.sc { font-variant: small-caps }
  span.sf { font-family: sans-serif }
  span.skribetitle { font-family: sans-serif; font-weight: bolder; font-size: x-large; }
  span.refscreen { }
  span.refprint { display: none; }
  -->
 </style>
</head>

<body class="chapter" bgcolor="#ffffff">
<table width="100%" class="skribetitle" cellspacing="0" cellpadding="0"><tbody>
<tr><td align="center" bgcolor="#8381de"><div class="skribetitle"><strong><big><big><big>18. Bigloo<br/>A practical Scheme compiler<br/>User manual for version 4.2b<br/>October 2015 -- Database</big></big></big></strong></div><center>
</center>
</td></tr></tbody></table>
<table cellpadding="3" cellspacing="0" width="100%" class="skribe-margins"><tr>
<td align="left" valign="top" class="skribe-left-margin" width="20%" bgcolor="#dedeff"><div class="skribe-left-margin">
<br/><center id='center33889'
><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr bgcolor="#8381de"><th id="tc33879" align="center" colspan="1"><font color="#ffffff"><strong id='bold33877'
>main page</strong></font></th></tr>
<tr bgcolor="#ffffff"><td id="tc33886" align="center" colspan="1"><table width="100%" border="0" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc33882" align="left" valign="top" colspan="1"><strong id='bold33881'
>top:</strong></td><td id="tc33883" align="right" valign="top" colspan="1"><a href="bigloo.html#Bigloo-A-practical-Scheme-compiler-User-manual-for-version-4.2b-October-2015" class="inbound">Bigloo<br/>A practical Scheme compiler<br/>User manual for version 4.2b<br/>October 2015</a></td></tr>
</tbody></table>
</td></tr>
</tbody></table>
</center>
<br/><br/><center id='center33899'
><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr bgcolor="#8381de"><th id="tc33893" align="center" colspan="1"><font color="#ffffff"><strong id='bold33891'
>Database</strong></font></th></tr>
<tr bgcolor="#ffffff"><td id="tc33896" align="center" colspan="1"><table cellspacing="1" cellpadding="1" width="100%" class="toc">
<tbody>
 <tr><td valign="top" align="left">18.1</td><td colspan="4" width="100%"><a href="bigloo-19.html#SQLite">SQLite</a></td></tr>
</tbody>
</table>
</td></tr>
</tbody></table>
</center>
<br/><br/><center id='center33909'
><table width="97%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" frame="box" rules="none"><tbody>
<tr bgcolor="#8381de"><th id="tc33903" align="center" colspan="1"><font color="#ffffff"><strong id='bold33901'
>Chapters</strong></font></th></tr>
<tr bgcolor="#ffffff"><td id="tc33906" align="center" colspan="1"><table cellspacing="1" cellpadding="1" width="100%" class="toc">
<tbody>
 <tr><td valign="top" align="left"></td><td colspan="4" width="100%"><a href="bigloo-1.html#Acknowledgements">Acknowledgements</a></td></tr>
 <tr><td valign="top" align="left">1</td><td colspan="4" width="100%"><a href="bigloo-2.html#Table-of-contents">Table of contents</a></td></tr>
 <tr><td valign="top" align="left">2</td><td colspan="4" width="100%"><a href="bigloo-3.html#Overview-of-Bigloo">Overview of Bigloo</a></td></tr>
 <tr><td valign="top" align="left">3</td><td colspan="4" width="100%"><a href="bigloo-4.html#Modules">Modules</a></td></tr>
 <tr><td valign="top" align="left">4</td><td colspan="4" width="100%"><a href="bigloo-5.html#Core-Language">Core Language</a></td></tr>
 <tr><td valign="top" align="left">5</td><td colspan="4" width="100%"><a href="bigloo-6.html#DSSSL-support">DSSSL support</a></td></tr>
 <tr><td valign="top" align="left">6</td><td colspan="4" width="100%"><a href="bigloo-7.html#Standard-Library">Standard Library</a></td></tr>
 <tr><td valign="top" align="left">7</td><td colspan="4" width="100%"><a href="bigloo-8.html#Pattern-Matching">Pattern Matching</a></td></tr>
 <tr><td valign="top" align="left">8</td><td colspan="4" width="100%"><a href="bigloo-9.html#Fast-search">Fast search</a></td></tr>
 <tr><td valign="top" align="left">9</td><td colspan="4" width="100%"><a href="bigloo-10.html#Structures-and-Records">Structures and Records</a></td></tr>
 <tr><td valign="top" align="left">10</td><td colspan="4" width="100%"><a href="bigloo-11.html#Object-System">Object System</a></td></tr>
 <tr><td valign="top" align="left">11</td><td colspan="4" width="100%"><a href="bigloo-12.html#Regular-parsing">Regular parsing</a></td></tr>
 <tr><td valign="top" align="left">12</td><td colspan="4" width="100%"><a href="bigloo-13.html#Lalr(1)-parsing">Lalr(1) parsing</a></td></tr>
 <tr><td valign="top" align="left">13</td><td colspan="4" width="100%"><a href="bigloo-14.html#Posix-Regular-Expressions">Posix Regular Expressions</a></td></tr>
 <tr><td valign="top" align="left">14</td><td colspan="4" width="100%"><a href="bigloo-15.html#Command-Line-Parsing">Command Line Parsing</a></td></tr>
 <tr><td valign="top" align="left">15</td><td colspan="4" width="100%"><a href="bigloo-16.html#Cryptography">Cryptography</a></td></tr>
 <tr><td valign="top" align="left">16</td><td colspan="4" width="100%"><a href="bigloo-17.html#Errors-Assertions-and-Traces">Errors, Assertions, and Traces</a></td></tr>
 <tr><td valign="top" align="left">17</td><td colspan="4" width="100%"><a href="bigloo-18.html#Threads">Threads</a></td></tr>
 <tr><td valign="top" align="left">18</td><td colspan="4" width="100%"><a href="bigloo-19.html#Database">Database</a></td></tr>
 <tr><td valign="top" align="left">19</td><td colspan="4" width="100%"><a href="bigloo-20.html#Multimedia">Multimedia</a></td></tr>
 <tr><td valign="top" align="left">20</td><td colspan="4" width="100%"><a href="bigloo-21.html#Mail">Mail</a></td></tr>
 <tr><td valign="top" align="left">21</td><td colspan="4" width="100%"><a href="bigloo-22.html#Text">Text</a></td></tr>
 <tr><td valign="top" align="left">22</td><td colspan="4" width="100%"><a href="bigloo-23.html#CSV">CSV</a></td></tr>
 <tr><td valign="top" align="left">23</td><td colspan="4" width="100%"><a href="bigloo-24.html#Eval-and-code-interpretation">Eval and code interpretation</a></td></tr>
 <tr><td valign="top" align="left">24</td><td colspan="4" width="100%"><a href="bigloo-25.html#Macro-expansion">Macro expansion</a></td></tr>
 <tr><td valign="top" align="left">25</td><td colspan="4" width="100%"><a href="bigloo-26.html#Parameters">Parameters</a></td></tr>
 <tr><td valign="top" align="left">26</td><td colspan="4" width="100%"><a href="bigloo-27.html#Explicit-typing">Explicit typing</a></td></tr>
 <tr><td valign="top" align="left">27</td><td colspan="4" width="100%"><a href="bigloo-28.html#The-C-interface">The C interface</a></td></tr>
 <tr><td valign="top" align="left">28</td><td colspan="4" width="100%"><a href="bigloo-29.html#The-Java-interface">The Java interface</a></td></tr>
 <tr><td valign="top" align="left">29</td><td colspan="4" width="100%"><a href="bigloo-30.html#Bigloo-Libraries">Bigloo Libraries</a></td></tr>
 <tr><td valign="top" align="left">30</td><td colspan="4" width="100%"><a href="bigloo-31.html#Extending-the-Runtime-System">Extending the Runtime System</a></td></tr>
 <tr><td valign="top" align="left">31</td><td colspan="4" width="100%"><a href="bigloo-32.html#SRFIs">SRFIs</a></td></tr>
 <tr><td valign="top" align="left">32</td><td colspan="4" width="100%"><a href="bigloo-33.html#Compiler-description">Compiler description</a></td></tr>
 <tr><td valign="top" align="left">33</td><td colspan="4" width="100%"><a href="bigloo-34.html#Cross-Compilation">Cross Compilation</a></td></tr>
 <tr><td valign="top" align="left">34</td><td colspan="4" width="100%"><a href="bigloo-35.html#User-Extensions">User Extensions</a></td></tr>
 <tr><td valign="top" align="left">35</td><td colspan="4" width="100%"><a href="bigloo-36.html#Bigloo-Development-Environment">Bigloo Development Environment</a></td></tr>
 <tr><td valign="top" align="left">36</td><td colspan="4" width="100%"><a href="bigloo-37.html#Global-Index">Global Index</a></td></tr>
 <tr><td valign="top" align="left">37</td><td colspan="4" width="100%"><a href="bigloo-38.html#Library-Index">Library Index</a></td></tr>
 <tr><td valign="top" align="left"></td><td colspan="4" width="100%"><a href="bigloo-39.html#Bibliography">Bibliography</a></td></tr>
</tbody>
</table>
</td></tr>
</tbody></table>
</center>
</div></td>
<td align="left" valign="top" class="skribe-body"><div class="skribe-body">
<a name="Database" class="mark"></a><a name="g23259" class="mark"></a>
Bigloo supports database programming. The current version proposes
a SQLite binding.<br/><br/>

<!-- SQLite -->
<a name="SQLite"></a>
<div class="section-atitle"><table width="100%"><tr><td bgcolor="#dedeff"><h3><font color="black">18.1 SQLite</font>
</h3></td></tr></table>
</div><div class="section">
<a name="SQLite" class="mark"></a><a name="g23262" class="mark"></a>
The Bigloo's C back-end supports SQL queries. It relies on the SQLite
library (<a href="http://www.sqlite.org/">http://www.sqlite.org/</a>). The SQLite binding is accessible
to Bigloo via the <code id='code23264'
>sqlite</code> library. Here is an example of module
that uses this library.<br/><br/><center id='center23276'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23274'
>(<font color="#1919af"><strong id='bold33910'
>module</strong></font> <font color="#1919af"><strong id='bold33912'
>example1</strong></font>
  (<font color="#1919af"><strong id='bold33914'
>library</strong></font> <font color="#1919af"><strong id='bold33916'
>sqlite</strong></font>))<br/><br/>(<strong id='bold33918'
>let</strong> ((db (<strong id='bold33919'
>instantiate</strong><font color="#00cf00"><strong id='bold33920'
>::sqlite</strong></font>)))
  ...)
</pre>
</td></tr>
</tbody></table></center>

<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23278" class="mark"></a><a name="sqlite" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23282" align="left" colspan="1"><strong id='bold23280'
>sqlite</strong><em id='it23281'
></em></td><td id="tc23283" align="right" colspan="1">Bigloo Sqlite class</td></tr>
</tbody></table>
<center id='center23291'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23289'
>(<strong id='bold33922'
>class</strong> sqlite
   (path<font color="#00cf00"><strong id='bold33923'
>::bstring</strong></font> read-only (default <font color="red">&quot;:memory:&quot;</font>)))
</pre>
</td></tr>
</tbody></table></center>

The instances of the class <code id='code23292'
>sqlite</code> hold SQLite databases. A database
may be permanently stored on a disk or loaded in memory. The class attribute
<code id='code23293'
>path</code> is the location on the disk where the database is stored. The
special path <code id='code23294'
>:memory:</code> denotes in-memory databases. When an instance
is created a SQLite database is <em id='emph23295'
>opened</em>.<br/><br/>Example:
<center id='center23306'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23304'
>(<font color="#6959cf"><strong id='bold33926'
>define</strong></font> <font color="#6959cf"><strong id='bold33928'
>db1</strong></font> (<strong id='bold33930'
>instantiate</strong><font color="#00cf00"><strong id='bold33931'
>::sqlite</strong></font> (path <font color="red">&quot;/tmp/foo.db&quot;</font>)))
(<font color="#6959cf"><strong id='bold33934'
>define</strong></font> <font color="#6959cf"><strong id='bold33936'
>db2</strong></font> (<strong id='bold33938'
>instantiate</strong><font color="#00cf00"><strong id='bold33939'
>::sqlite</strong></font>))
</pre>
</td></tr>
</tbody></table></center>

Binds the global variable <code id='code23308'
><em id='it23307'
>db1</em></code> to a database that is stored on the file
system at location <code id='code23309'
>/tmp/foo.db</code>. This example also binds the global
variable <code id='code23311'
><em id='it23310'
>db2</em></code> to an in-memory SQLite database.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23315" class="mark"></a><a name="sqlite-close" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23321" align="left" colspan="1"><strong id='bold23317'
>sqlite-close</strong><em id='it23320'
> <code id='code23319'
><em id='it23318'
>sqlite</em></code></em></td><td id="tc23322" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
This function closes a database previously opened by creating an instance
of the class <code id='code23325'
>sqlite</code>.<br/><br/>Example:
<center id='center23334'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23332'
>(<strong id='bold33941'
>let</strong> ((db (<strong id='bold33942'
>instantiate</strong><font color="#00cf00"><strong id='bold33943'
>::sqlite</strong></font>)))
  (sqlite-exec db <font color="red">&quot;CREATE TABLE table1 (x INTEGER, y INTEGER)&quot;</font>)
  (sqlite-exec db <font color="red">&quot;INSERT INTO table1 VALUES( ~a, ~a )&quot;</font> 1 4)
  (sqlite-close db))
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23338" class="mark"></a><a name="sqlite-format" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23346" align="left" colspan="1"><strong id='bold23340'
>sqlite-format</strong><em id='it23345'
> <code id='code23342'
><em id='it23341'
>string</em></code> <code id='code23344'
><em id='it23343'
>arg</em></code> ...</em></td><td id="tc23347" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
Constructs a string of characters representing an SQLite
commands. This function acts as <code id='code23350'
>format</code> (see <a href="bigloo-7.html#Input-and-Output" class="inbound">Input and Output</a>). It is augmented with three additional escape sequence:
<code id='code23351'
>~q</code>, <code id='code23352'
>~k</code>, and <code id='code23353'
>~l</code>. The first one build a string of
characters where the characters denoting SQL strings (i.e., the
character <code id='code23354'
>'</code>) is automatically escaped. The escape character
<code id='code23355'
>~k</code> introduces a list of SQL strings. The escape character
<code id='code23356'
>~l</code> introduces a SQL list.<br/><br/>Summary of all escape codes:
<ul class="itemize" id='itemize23373'
><li><code id='code23358'
>~a</code> The corresponding value is inserted into the string 
as if printed with display.
</li>
<li><code id='code23360'
>~s</code> The corresponding value is inserted into the string 
as if printed with write.
</li>
<li><code id='code23362'
>~%</code> A newline is inserted.
</li>
<li><code id='code23364'
>~~</code> A tilde <code id='code23365'
>~</code> is inserted.
</li>
<li><code id='code23367'
>~q</code> An SQL escaped string.
</li>
<li><code id='code23369'
>~l</code> Introduces a list (comma separated).
</li>
<li><code id='code23371'
>~k</code> Introduces a list of SQL strings.
</li>
</ul>
Examples:<br/><br/><center id='center23400'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23398'
>(<font color="#1919af"><strong id='bold33947'
>module</strong></font> <font color="#1919af"><strong id='bold33949'
>example</strong></font>
   (<font color="#1919af"><strong id='bold33951'
>library</strong></font> <font color="#1919af"><strong id='bold33953'
>sqlite</strong></font>))<br/><br/>(sqlite-format <font color="red">&quot;~a&quot;</font> <font color="red">&quot;foo'bar&quot;</font>) =&gt; <font color="red">&quot;foo'bar&quot;</font>
(sqlite-format <font color="red">&quot;~q&quot;</font> <font color="red">&quot;foo'bar&quot;</font>) =&gt; <font color="red">&quot;'foo''bar'&quot;</font>
(sqlite-format <font color="red">&quot;~a&quot;</font> '(<font color="red">&quot;foo'bar&quot;</font> <font color="red">&quot;foo&quot;</font>)) =&gt; <font color="red">&quot;(foo'bar foo)&quot;</font>
(sqlite-format <font color="red">&quot;~k&quot;</font> '(<font color="red">&quot;foo'bar&quot;</font> <font color="red">&quot;foo&quot;</font>)) =&gt; <font color="red">&quot;'foo''bar','foo'&quot;</font>
(sqlite-format <font color="red">&quot;~l&quot;</font> '(<font color="red">&quot;foo'bar&quot;</font> <font color="red">&quot;foo&quot;</font>)) =&gt; <font color="red">&quot;foo'bar,foo&quot;</font>
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23404" class="mark"></a><a name="sqlite-exec" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23414" align="left" colspan="1"><strong id='bold23406'
>sqlite-exec</strong><em id='it23413'
> <code id='code23408'
><em id='it23407'
>sqlite</em></code> <code id='code23410'
><em id='it23409'
>string</em></code> <code id='code23412'
><em id='it23411'
>arg</em></code> ...</em></td><td id="tc23415" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
The function <code id='code23418'
>sqlite-exec</code> <em id='emph23419'
>executes</em> an SQLite command. The command
is the built by implicitly invoking <code id='code23420'
>sqlite-format</code> on <code id='code23422'
><em id='it23421'
>string</em></code> and
the optional <code id='code23424'
><em id='it23423'
>arg</em></code> arguments. This function returns a single element,
the first one returned by the SQL engine.<br/><br/>Example:
<center id='center23441'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23439'
>(<font color="#1919af"><strong id='bold33973'
>module</strong></font> <font color="#1919af"><strong id='bold33975'
>example</strong></font>
   (<font color="#1919af"><strong id='bold33977'
>library</strong></font> <font color="#1919af"><strong id='bold33979'
>sqlite</strong></font>))<br/><br/>(<font color="#6959cf"><strong id='bold33981'
>define</strong></font> <font color="#6959cf"><strong id='bold33983'
>*db*</strong></font> (<strong id='bold33985'
>instantiate</strong><font color="#00cf00"><strong id='bold33986'
>::sqlite</strong></font>))<br/><br/>(sqlite-exec *db* <font color="red">&quot;CREATE TABLE foo (x INTEGER, y INTEGER)&quot;</font>)
(for-each (<strong id='bold33989'
>lambda</strong> (x)
		(sqlite-exec *db*  <font color="red">&quot;INSERT INTO foo VALUES(~A, ~A)&quot;</font> x (* x x)))
	     (iota 10))
(sqlite-exec *db* <font color="red">&quot;SELECT * FROM foo&quot;</font>)
   =&gt; 9
</pre>
</td></tr>
</tbody></table></center>

</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23445" class="mark"></a><a name="sqlite-eval" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23457" align="left" colspan="1"><strong id='bold23447'
>sqlite-eval</strong><em id='it23456'
> <code id='code23449'
><em id='it23448'
>sqlite</em></code> <code id='code23451'
><em id='it23450'
>procedure</em></code> <code id='code23453'
><em id='it23452'
>string</em></code> <code id='code23455'
><em id='it23454'
>arg</em></code> ...</em></td><td id="tc23458" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
The function <code id='code23461'
>sqlite-eval</code> invokes a SQLite command built by
implicitly invoking <code id='code23462'
>sqlite-format</code> on <code id='code23464'
><em id='it23463'
>string</em></code> and the optional
<code id='code23466'
><em id='it23465'
>arg</em></code> arguments. The result of the function is built by applying 
<code id='code23468'
><em id='it23467'
>procedure</em></code> to the first value returned by the SQLite call.<br/><br/>Note: user callback (<code id='code23471'
><em id='it23470'
>procedure</em></code>) <strong id='bold23472'
>must not</strong> exit. That is they must
not invoke a function create by <code id='code23473'
>bind-exit</code>. Exiting from a callback will
leave the database in a inconsistent state that prevent transactions to
be rolled back.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23477" class="mark"></a><a name="sqlite-map" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23489" align="left" colspan="1"><strong id='bold23479'
>sqlite-map</strong><em id='it23488'
> <code id='code23481'
><em id='it23480'
>sqlite</em></code> <code id='code23483'
><em id='it23482'
>procedure</em></code> <code id='code23485'
><em id='it23484'
>string</em></code> <code id='code23487'
><em id='it23486'
>arg</em></code> ...</em></td><td id="tc23490" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
The function <code id='code23493'
>sqlite-map</code> invokes a SQLite command built by
implicitly invoking <code id='code23494'
>sqlite-format</code> on <code id='code23496'
><em id='it23495'
>string</em></code> and the optional
<code id='code23498'
><em id='it23497'
>arg</em></code> arguments. The result is a list whose elements are built by applying 
<code id='code23500'
><em id='it23499'
>procedure</em></code> to all the values returned by the SQLite call.<br/><br/>Note: user callback (<code id='code23503'
><em id='it23502'
>procedure</em></code>) <strong id='bold23504'
>must not</strong> exit. That is they must
not invoke a function create by <code id='code23505'
>bind-exit</code>. Exiting from a callback will
leave the database in a inconsistent state that prevent transactions to
be rolled back.
Example:<br/><br/><center id='center23523'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23521'
>(<font color="#1919af"><strong id='bold33992'
>module</strong></font> <font color="#1919af"><strong id='bold33994'
>example</strong></font>
   (<font color="#1919af"><strong id='bold33996'
>library</strong></font> <font color="#1919af"><strong id='bold33998'
>sqlite</strong></font>))<br/><br/>(<font color="#6959cf"><strong id='bold34000'
>define</strong></font> <font color="#6959cf"><strong id='bold34002'
>*db*</strong></font> (<strong id='bold34004'
>instantiate</strong><font color="#00cf00"><strong id='bold34005'
>::sqlite</strong></font>))<br/><br/>(sqlite-exec *db* <font color="red">&quot;CREATE TABLE foo (x INTEGER, y INTEGER)&quot;</font>)
(for-each (<strong id='bold34008'
>lambda</strong> (x)
		(sqlite-exec *db*  <font color="red">&quot;INSERT INTO foo VALUES(~A, ~A)&quot;</font> x (* x x)))
	     (iota 10))
(sqlite-map *db* 
  (<strong id='bold34010'
>lambda</strong> (s1 s2) (+ (string-&gt;integer s1) (string-&gt;integer s2))) 
  <font color="red">&quot;SELECT * FROM foo&quot;</font>)
   =&gt; (0 2 6 12 20 30 42 56 72 90)
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
Example2:
<center id='center23561'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23559'
>(<font color="#1919af"><strong id='bold34012'
>module</strong></font> <font color="#1919af"><strong id='bold34014'
>example</strong></font>
   (<font color="#1919af"><strong id='bold34016'
>library</strong></font> <font color="#1919af"><strong id='bold34018'
>sqlite</strong></font>))<br/><br/>(<font color="#6959cf"><strong id='bold34020'
>define</strong></font> <font color="#6959cf"><strong id='bold34022'
>*db*</strong></font> (<strong id='bold34024'
>instantiate</strong><font color="#00cf00"><strong id='bold34025'
>::sqlite</strong></font>))<br/><br/>(sqlite-exec *db* <font color="red">&quot;CREATE TABLE foo (x INTEGER, y INTEGER)&quot;</font>)
(for-each (<strong id='bold34028'
>lambda</strong> (x)
		(sqlite-exec *db*  <font color="red">&quot;INSERT INTO foo VALUES(~A, ~A)&quot;</font> x (* x x)))
	     (iota 10))
(sqlite-map *db* vector <font color="red">&quot;SELECT * FROM foo&quot;</font>)
   =&gt; '(#(<font color="red">&quot;0&quot;</font> <font color="red">&quot;0&quot;</font>)
	#(<font color="red">&quot;1&quot;</font> <font color="red">&quot;1&quot;</font>)
	#(<font color="red">&quot;2&quot;</font> <font color="red">&quot;4&quot;</font>)
	#(<font color="red">&quot;3&quot;</font> <font color="red">&quot;9&quot;</font>)
	#(<font color="red">&quot;4&quot;</font> <font color="red">&quot;16&quot;</font>)
	#(<font color="red">&quot;5&quot;</font> <font color="red">&quot;25&quot;</font>)
	#(<font color="red">&quot;6&quot;</font> <font color="red">&quot;36&quot;</font>)
	#(<font color="red">&quot;7&quot;</font> <font color="red">&quot;49&quot;</font>)
	#(<font color="red">&quot;8&quot;</font> <font color="red">&quot;64&quot;</font>)
	#(<font color="red">&quot;9&quot;</font> <font color="red">&quot;81&quot;</font>))
</pre>
</td></tr>
</tbody></table></center>

<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23563" class="mark"></a><a name="sqlite-name-of-tables" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23569" align="left" colspan="1"><strong id='bold23565'
>sqlite-name-of-tables</strong><em id='it23568'
> <code id='code23567'
><em id='it23566'
>sqlite</em></code></em></td><td id="tc23570" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
Returns the name of tables in the database. This list can also be
obtained with<br/><br/><center id='center23578'
><table cellspacing="0" class="color" cellpadding="0" width="95%"><tbody>
<tr><td bgcolor="#ffffcc"><pre class="prog" id='prog23576'
>(sqlite-map db
   (<strong id='bold34051'
>lambda</strong> (x) x)
   <font color="red">&quot;SELECT name FROM sqlite_master WHERE type='table'&quot;</font>)
</pre>
</td></tr>
</tbody></table></center>
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23582" class="mark"></a><a name="sqlite-table-name-of-columns" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23590" align="left" colspan="1"><strong id='bold23584'
>sqlite-table-name-of-columns</strong><em id='it23589'
> <code id='code23586'
><em id='it23585'
>sqlite</em></code> <code id='code23588'
><em id='it23587'
>table</em></code></em></td><td id="tc23591" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
Returns the name of columns in the table.
</td></tr>
</tbody></table><br/>
<table cellspacing="0" class="frame" cellpadding="10" border="1" width="100%"><tbody>
<tr><td><a name="g23597" class="mark"></a><a name="sqlite-last-insert-rowid" class="mark"></a><table width="100%" style="border-collapse: collapse;" frame="void" rules="none"><tbody>
<tr><td id="tc23603" align="left" colspan="1"><strong id='bold23599'
>sqlite-last-insert-rowid</strong><em id='it23602'
> <code id='code23601'
><em id='it23600'
>sqlite</em></code></em></td><td id="tc23604" align="right" colspan="1">Bigloo Sqlite function</td></tr>
</tbody></table>
Returns the SQLite <em id='emph23607'
>rowid</em> of the last inserted row.
</td></tr>
</tbody></table><br/><br/><br/><br/><br/><br/><br/><br/> 

</div><br>
</div></td>
</tr></table><div class="skribe-ending">
<hr> 
<p class="ending" id='paragraph34058'
><font size="-1">
This <span class="sc">Html</span> page has been produced by 
<a href="http://www-sop.inria.fr/indes/fp/Skribe" class="http">Skribe</a>.
<br/>
Last update <em id='it34056'
>Tue Oct 27 15:48:37 2015</em>.</font></p></div>
</body>
</html>